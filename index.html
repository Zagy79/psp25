<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plakát s QR platbou</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #000;
      color: #e8ecf1;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    }
    figure {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #000;
    }
    img {
      max-width: 100%;
      max-height: 100vh;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0,0,0,.5);
    }
    .qr-wrap {
      margin: 24px auto 40px;
      background: #111;
      border-radius: 16px;
      padding: 16px;
      display: grid;
      place-items: center;
      border: 1px solid rgba(255,255,255,.1);
    }
    .qr {
      width: min(60vw, 240px);
      aspect-ratio: 1/1;
    }
    .meta {
      font-size: 12px;
      color: #9aa3b2;
      word-break: break-all;
      text-align: center;
      margin-top: 8px;
      max-width: 260px;
    }
    .btns {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }
    button {
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.15);
      background: #1a1d27;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
          integrity="sha512-JWx8nGZ9gC5W0v7x1KOCV3wYt2zq4Rz5Qb7Q9sSNK4f8vWgE5bRr7n8rE56+z7Dq4X3Z5YpQ2Vb1q4KfRNZ0Zg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
  <figure>
    <img src="plakat.png" alt="Plakát" loading="lazy">
  </figure>

  <div class="qr-wrap">
    <div id="qr" class="qr"></div>
    <div class="btns">
      <button id="dlQR">Stáhnout QR</button>
      <button id="copySPD">Kopírovat SPD</button>
    </div>
    <div id="spd" class="meta"></div>
  </div>

<script>
const PAYMENT = {
  iban: 'CZ6508000000192000123456',
  amount: '1500.00',
  cc: 'CZK',
  vs: '2025001',
  msg: 'Podpora projektu'
};

function normalizeIBAN(v){return (v||'').toUpperCase().replace(/[^A-Z0-9]/g,'');}
function buildSPD(d){
  const p=['SPD*1.0'];
  const iban=normalizeIBAN(d.iban);if(!iban)return'';
  p.push('ACC:'+iban);
  if(d.amount)p.push('AM:'+Number(d.amount).toFixed(2));
  p.push('CC:'+(d.cc||'CZK'));
  if(d.vs)p.push('X-VS:'+d.vs);
  if(d.msg)p.push('MSG:'+d.msg);
  return p.join('*');
}
const SPD=buildSPD(PAYMENT);
const qrBox=document.getElementById('qr');
new QRCode(qrBox,{text:SPD,width:240,height:240,correctLevel:QRCode.CorrectLevel.M});
document.getElementById('spd').textContent=SPD;

document.getElementById('dlQR').onclick=()=>{
  const canvas=qrBox.querySelector('canvas');
  if(!canvas)return;
  const a=document.createElement('a');
  a.href=canvas.toDataURL('image/png');
  a.download='qr-platba.png';
  a.click();
};
document.getElementById('copySPD').onclick=()=>{
  navigator.clipboard.writeText(SPD);
  alert('Zkopírováno');
};
</script>
</body>
</html>
